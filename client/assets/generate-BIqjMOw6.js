import{w as K,a,p as s}from"./chunk-PVWAREVJ-XSx8T8tY.js";import{u as S,L as l,B as G,T as r,o as F}from"./index.esm-Dj_4ZMYr.js";import{I as n}from"./input-CvqOa1x3.js";function I({}){return[{title:"PGP Gen - Key Generation"},{name:"description",content:"Key generation tool"}]}function k(){const[o,i]=a.useState(null),[m,d]=a.useState(null),[h,p]=a.useState(!1),x=a.useRef(null),{register:c,handleSubmit:f,formState:t,reset:u}=S(),j=!(t.isDirty&&t.isValid);async function y({name:g,email:b,passphrase:N}){p(!0),i(null),d(null);try{const e=await F.generateKey({userIds:[{name:g,email:b}],numBits:2048,passphrase:N});i({publicKey:e.publicKeyArmored,privateKey:e.privateKeyArmored})}catch(e){const v=e instanceof Error?e.message:String(e);console.error("Key generation failed:",e),d(`Key generation failed. ${v}`)}finally{p(!1)}}return a.useEffect(()=>{t.isSubmitSuccessful&&u(void 0,{keepValues:!0})},[t.isSubmitSuccessful,u]),s.jsx("section",{children:s.jsx("form",{onSubmit:f(y),children:s.jsxs("div",{className:"mr-4 ml-4 grid max-w-[896px] grid-cols-3 md:ml-0 md:grid-cols-4",children:[s.jsx("div",{className:"col-span-full col-start-1 h-24"}),s.jsx(l,{htmlFor:"name",className:"col-span-3 col-start-1 mb-2 md:col-span-1 md:ml-8",children:"name"}),s.jsx(n,{id:"name",placeholder:"John Doe",className:"col-span-3 col-start-1 md:col-start-2",...c("name",{required:!0})}),s.jsx("div",{className:"col-span-full col-start-1 h-12"}),s.jsx(l,{htmlFor:"email",className:"col-span-3 col-start-1 mb-2 md:col-span-1 md:ml-8",children:"email?"}),s.jsx(n,{id:"email",type:"email",placeholder:"john.doe@example.com",className:"col-span-3 col-start-1 md:col-start-2",...c("email",{required:!1})}),s.jsx("div",{className:"col-span-full col-start-1 h-12"}),s.jsx(l,{htmlFor:"passphrase",className:"col-span-3 col-start-1 mb-2 md:col-span-1 md:ml-8",children:"passphrase?"}),s.jsx(n,{id:"passphrase",type:"password",placeholder:"••••••",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",className:"col-span-3 col-start-1 md:col-start-2",...c("passphrase",{required:!1})}),s.jsx("div",{className:"col-span-full col-start-1 h-12"}),s.jsx(G,{type:"submit",className:"col-span-full md:col-start-2",disabled:j,children:"Generate"}),s.jsx("div",{className:"col-span-full col-start-1 h-12",ref:x}),h&&s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"col-span-3 col-start-1 md:col-start-2",children:"Generating..."}),s.jsx("div",{className:"col-span-full col-start-1 h-12"})]}),m&&s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"text-foreground-error bg-background-error col-span-3 col-start-1 md:col-start-2",children:m}),s.jsx("div",{className:"col-span-full col-start-1 h-12"})]}),o&&s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"col-span-3 col-start-1 mb-2 md:col-span-1 md:ml-8",children:"public key"}),s.jsx(r,{className:"col-span-3 col-start-1 md:col-start-2",isCopyable:!0,children:o.publicKey}),s.jsx("div",{className:"col-span-full col-start-1 h-12"}),s.jsx(l,{className:"col-span-3 col-start-1 mb-2 md:col-span-1 md:ml-8",children:"private key"}),s.jsx(r,{className:"col-span-3 col-start-1 md:col-start-2",isCopyable:!0,children:o.privateKey}),s.jsx("div",{className:"col-span-full col-start-1 h-12"})]})]})})})}const P=K(k);export{P as default,I as meta};
